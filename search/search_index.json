{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home Introduction Welcome to pheval_amelie's documentation!","title":"Home"},{"location":"#home","text":"","title":"Home"},{"location":"#introduction","text":"Welcome to pheval_amelie's documentation!","title":"Introduction"},{"location":"api/pheval_amelie/cli/","text":"main CLI for pheval_amelie. Args: verbose (int): Verbosity while running. quiet (bool): Boolean to be quiet or verbose. Usage: main [OPTIONS] COMMAND [ARGS]... Options: Name Type Description Default -v , --verbose integer range ( 0 and above) N/A 0 -q , --quiet text N/A None --version boolean Show the version and exit. False --help boolean Show this message and exit. False Subcommands run : Run the pheval_amelie's demo command. run Run the pheval_amelie's demo command. Usage: main run [OPTIONS] Options: Name Type Description Default --help boolean Show this message and exit. False run Run the pheval_amelie's demo command. Usage: run [OPTIONS] Options: Name Type Description Default --help boolean Show this message and exit. False","title":"Cli"},{"location":"api/pheval_amelie/cli/#main","text":"CLI for pheval_amelie. Args: verbose (int): Verbosity while running. quiet (bool): Boolean to be quiet or verbose. Usage: main [OPTIONS] COMMAND [ARGS]... Options: Name Type Description Default -v , --verbose integer range ( 0 and above) N/A 0 -q , --quiet text N/A None --version boolean Show the version and exit. False --help boolean Show this message and exit. False Subcommands run : Run the pheval_amelie's demo command.","title":"main"},{"location":"api/pheval_amelie/cli/#run","text":"Run the pheval_amelie's demo command. Usage: main run [OPTIONS] Options: Name Type Description Default --help boolean Show this message and exit. False","title":"run"},{"location":"api/pheval_amelie/cli/#run_1","text":"Run the pheval_amelie's demo command. Usage: run [OPTIONS] Options: Name Type Description Default --help boolean Show this message and exit. False","title":"run"},{"location":"api/pheval_amelie/constants/","text":"Constants.","title":"Constants"},{"location":"api/pheval_amelie/main/","text":"Main python file. demo () Define API. Source code in src/pheval_amelie/main.py 4 5 6 def demo (): \"\"\"Define API.\"\"\" print ( \"Hello, World!\" )","title":"Main"},{"location":"api/pheval_amelie/main/#src.pheval_amelie.main.demo","text":"Define API. Source code in src/pheval_amelie/main.py 4 5 6 def demo (): \"\"\"Define API.\"\"\" print ( \"Hello, World!\" )","title":"demo"},{"location":"api/pheval_amelie/runner/","text":"Runner. AmeliePhEvalRunner dataclass Bases: PhEvalRunner Runner class implementation. Source code in src/pheval_amelie/runner.py 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 @dataclass class AmeliePhEvalRunner ( PhEvalRunner ): \"\"\"Runner class implementation.\"\"\" input_dir : Path testdata_dir : Path tmp_dir : Path output_dir : Path config_file : Path version : str def prepare ( self ): \"\"\"Prepare.\"\"\" print ( \"preparing\" ) def run ( self ): \"\"\"Run.\"\"\" print ( \"running\" ) run ( testdata_dir = self . testdata_dir , tool_input_commands_dir = self . tool_input_commands_dir , raw_results_dir = self . raw_results_dir , ) def post_process ( self ): \"\"\"Post Process.\"\"\" print ( \"post processing\" ) post_process_results_format ( raw_results_dir = self . raw_results_dir , output_dir = self . output_dir ) post_process () Post Process. Source code in src/pheval_amelie/runner.py 36 37 38 39 def post_process ( self ): \"\"\"Post Process.\"\"\" print ( \"post processing\" ) post_process_results_format ( raw_results_dir = self . raw_results_dir , output_dir = self . output_dir ) prepare () Prepare. Source code in src/pheval_amelie/runner.py 23 24 25 def prepare ( self ): \"\"\"Prepare.\"\"\" print ( \"preparing\" ) run () Run. Source code in src/pheval_amelie/runner.py 27 28 29 30 31 32 33 34 def run ( self ): \"\"\"Run.\"\"\" print ( \"running\" ) run ( testdata_dir = self . testdata_dir , tool_input_commands_dir = self . tool_input_commands_dir , raw_results_dir = self . raw_results_dir , )","title":"Runner"},{"location":"api/pheval_amelie/runner/#src.pheval_amelie.runner.AmeliePhEvalRunner","text":"Bases: PhEvalRunner Runner class implementation. Source code in src/pheval_amelie/runner.py 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 @dataclass class AmeliePhEvalRunner ( PhEvalRunner ): \"\"\"Runner class implementation.\"\"\" input_dir : Path testdata_dir : Path tmp_dir : Path output_dir : Path config_file : Path version : str def prepare ( self ): \"\"\"Prepare.\"\"\" print ( \"preparing\" ) def run ( self ): \"\"\"Run.\"\"\" print ( \"running\" ) run ( testdata_dir = self . testdata_dir , tool_input_commands_dir = self . tool_input_commands_dir , raw_results_dir = self . raw_results_dir , ) def post_process ( self ): \"\"\"Post Process.\"\"\" print ( \"post processing\" ) post_process_results_format ( raw_results_dir = self . raw_results_dir , output_dir = self . output_dir )","title":"AmeliePhEvalRunner"},{"location":"api/pheval_amelie/runner/#src.pheval_amelie.runner.AmeliePhEvalRunner.post_process","text":"Post Process. Source code in src/pheval_amelie/runner.py 36 37 38 39 def post_process ( self ): \"\"\"Post Process.\"\"\" print ( \"post processing\" ) post_process_results_format ( raw_results_dir = self . raw_results_dir , output_dir = self . output_dir )","title":"post_process"},{"location":"api/pheval_amelie/runner/#src.pheval_amelie.runner.AmeliePhEvalRunner.prepare","text":"Prepare. Source code in src/pheval_amelie/runner.py 23 24 25 def prepare ( self ): \"\"\"Prepare.\"\"\" print ( \"preparing\" )","title":"prepare"},{"location":"api/pheval_amelie/runner/#src.pheval_amelie.runner.AmeliePhEvalRunner.run","text":"Run. Source code in src/pheval_amelie/runner.py 27 28 29 30 31 32 33 34 def run ( self ): \"\"\"Run.\"\"\" print ( \"running\" ) run ( testdata_dir = self . testdata_dir , tool_input_commands_dir = self . tool_input_commands_dir , raw_results_dir = self . raw_results_dir , )","title":"run"},{"location":"api/pheval_amelie/post_process/post_process/","text":"Post processing functions. post_process_results_format ( raw_results_dir , output_dir ) Post process AMELIE results to PhEvalGeneResults. Parameters: Name Type Description Default raw_results_dir Path Path to the raw results directory. required output_dir Path Path to the output directory. required Source code in src/pheval_amelie/post_process/post_process.py 8 9 10 11 12 13 14 15 16 17 18 19 def post_process_results_format ( raw_results_dir : Path , output_dir : Path ) -> None : \"\"\" Post process AMELIE results to PhEvalGeneResults. Args: raw_results_dir (Path): Path to the raw results directory. output_dir (Path): Path to the output directory. \"\"\" print ( \"...creating pheval gene results format...\" ) create_standardised_results ( results_dir = raw_results_dir , output_dir = output_dir ) print ( \"done\" )","title":"Post process"},{"location":"api/pheval_amelie/post_process/post_process/#src.pheval_amelie.post_process.post_process.post_process_results_format","text":"Post process AMELIE results to PhEvalGeneResults. Parameters: Name Type Description Default raw_results_dir Path Path to the raw results directory. required output_dir Path Path to the output directory. required Source code in src/pheval_amelie/post_process/post_process.py 8 9 10 11 12 13 14 15 16 17 18 19 def post_process_results_format ( raw_results_dir : Path , output_dir : Path ) -> None : \"\"\" Post process AMELIE results to PhEvalGeneResults. Args: raw_results_dir (Path): Path to the raw results directory. output_dir (Path): Path to the output directory. \"\"\" print ( \"...creating pheval gene results format...\" ) create_standardised_results ( results_dir = raw_results_dir , output_dir = output_dir ) print ( \"done\" )","title":"post_process_results_format"},{"location":"api/pheval_amelie/post_process/post_process_results_format/","text":"Post Process AMELIE result functions. PhEvalGeneResultFromAmelieCreator Class for converting AMELIE JSON result to PhEvalGeneResult. Source code in src/pheval_amelie/post_process/post_process_results_format.py 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 class PhEvalGeneResultFromAmelieCreator : \"\"\"Class for converting AMELIE JSON result to PhEvalGeneResult.\"\"\" def __init__ ( self , amelie_result : Dict , gene_identifier_updator : GeneIdentifierUpdater ): \"\"\"Initialise PhEvalGeneResultFromAmelieCreator class.\"\"\" self . amelie_result = amelie_result self . gene_identifier_updater = gene_identifier_updator @staticmethod def _find_gene_symbol ( gene_entry : List ) -> str : \"\"\" Find the gene symbol. Args: gene_entry (List): A gene entry from the AMELIE JSON result. Returns: str: The gene symbol. \"\"\" return gene_entry [ 0 ] def _find_gene_identifier ( self , gene_entry : List ) -> str : \"\"\" Find the gene identifier. Args: gene_entry (List): A gene entry from the AMELIE JSON result. Returns: str: The gene identifier. \"\"\" return self . gene_identifier_updater . find_identifier ( self . _find_gene_symbol ( gene_entry )) @staticmethod def _find_highest_score ( gene_entry : List ) -> float : \"\"\" Find the highest score for a gene entry. Args: gene_entry (list): A gene entry from the AMELIE JSON result. Returns: float: Highest score. \"\"\" scores = [ result [ 1 ] for result in gene_entry [ 1 ]] return max ( scores ) def extract_pheval_gene_requirements ( self ) -> List [ PhEvalGeneResult ]: \"\"\" Extract PhEval Gene requirements from AMELIE JSON result. Returns: List[PhEvalGeneResult]: List of PhEvalGeneResult. \"\"\" simplified_amelie_result = [] for gene_entry in self . amelie_result : simplified_amelie_result . append ( PhEvalGeneResult ( gene_symbol = self . _find_gene_symbol ( gene_entry ), gene_identifier = self . _find_gene_identifier ( gene_entry ), score = self . _find_highest_score ( gene_entry ), ) ) return simplified_amelie_result __init__ ( amelie_result , gene_identifier_updator ) Initialise PhEvalGeneResultFromAmelieCreator class. Source code in src/pheval_amelie/post_process/post_process_results_format.py 32 33 34 35 def __init__ ( self , amelie_result : Dict , gene_identifier_updator : GeneIdentifierUpdater ): \"\"\"Initialise PhEvalGeneResultFromAmelieCreator class.\"\"\" self . amelie_result = amelie_result self . gene_identifier_updater = gene_identifier_updator extract_pheval_gene_requirements () Extract PhEval Gene requirements from AMELIE JSON result. Returns: Type Description List [ PhEvalGeneResult ] List[PhEvalGeneResult]: List of PhEvalGeneResult. Source code in src/pheval_amelie/post_process/post_process_results_format.py 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 def extract_pheval_gene_requirements ( self ) -> List [ PhEvalGeneResult ]: \"\"\" Extract PhEval Gene requirements from AMELIE JSON result. Returns: List[PhEvalGeneResult]: List of PhEvalGeneResult. \"\"\" simplified_amelie_result = [] for gene_entry in self . amelie_result : simplified_amelie_result . append ( PhEvalGeneResult ( gene_symbol = self . _find_gene_symbol ( gene_entry ), gene_identifier = self . _find_gene_identifier ( gene_entry ), score = self . _find_highest_score ( gene_entry ), ) ) return simplified_amelie_result create_standardised_results ( results_dir , output_dir ) Write standardised gene results from default AMELIE JSON output. Parameters: Name Type Description Default results_dir Path Path to the raw results directory. required output_dir Path Path to the output directory. required Source code in src/pheval_amelie/post_process/post_process_results_format.py 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 def create_standardised_results ( results_dir : Path , output_dir : Path ) -> None : \"\"\" Write standardised gene results from default AMELIE JSON output. Args: results_dir (Path): Path to the raw results directory. output_dir (Path): Path to the output directory. \"\"\" hgnc_data = create_hgnc_dict () gene_identifier_updator = GeneIdentifierUpdater ( hgnc_data = hgnc_data , gene_identifier = \"ensembl_id\" ) for result in all_files ( results_dir ): amelie_result = read_amelie_result ( result ) pheval_gene_result = PhEvalGeneResultFromAmelieCreator ( amelie_result , gene_identifier_updator ) . extract_pheval_gene_requirements () generate_pheval_result ( pheval_result = pheval_gene_result , sort_order_str = \"DESCENDING\" , output_dir = output_dir , tool_result_path = result , ) read_amelie_result ( amelie_result ) Parse the AMELIE JSON result. Parameters: Name Type Description Default amelie_result Path Path to the AMELIE JSON result. required Returns: Name Type Description Dict Dict Parsed AMELIE result. Source code in src/pheval_amelie/post_process/post_process_results_format.py 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def read_amelie_result ( amelie_result : Path ) -> Dict : \"\"\" Parse the AMELIE JSON result. Args: amelie_result (Path): Path to the AMELIE JSON result. Returns: Dict: Parsed AMELIE result. \"\"\" with open ( amelie_result , \"r\" ) as file : result = json . load ( file ) file . close () return result","title":"Post process results format"},{"location":"api/pheval_amelie/post_process/post_process_results_format/#src.pheval_amelie.post_process.post_process_results_format.PhEvalGeneResultFromAmelieCreator","text":"Class for converting AMELIE JSON result to PhEvalGeneResult. Source code in src/pheval_amelie/post_process/post_process_results_format.py 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 class PhEvalGeneResultFromAmelieCreator : \"\"\"Class for converting AMELIE JSON result to PhEvalGeneResult.\"\"\" def __init__ ( self , amelie_result : Dict , gene_identifier_updator : GeneIdentifierUpdater ): \"\"\"Initialise PhEvalGeneResultFromAmelieCreator class.\"\"\" self . amelie_result = amelie_result self . gene_identifier_updater = gene_identifier_updator @staticmethod def _find_gene_symbol ( gene_entry : List ) -> str : \"\"\" Find the gene symbol. Args: gene_entry (List): A gene entry from the AMELIE JSON result. Returns: str: The gene symbol. \"\"\" return gene_entry [ 0 ] def _find_gene_identifier ( self , gene_entry : List ) -> str : \"\"\" Find the gene identifier. Args: gene_entry (List): A gene entry from the AMELIE JSON result. Returns: str: The gene identifier. \"\"\" return self . gene_identifier_updater . find_identifier ( self . _find_gene_symbol ( gene_entry )) @staticmethod def _find_highest_score ( gene_entry : List ) -> float : \"\"\" Find the highest score for a gene entry. Args: gene_entry (list): A gene entry from the AMELIE JSON result. Returns: float: Highest score. \"\"\" scores = [ result [ 1 ] for result in gene_entry [ 1 ]] return max ( scores ) def extract_pheval_gene_requirements ( self ) -> List [ PhEvalGeneResult ]: \"\"\" Extract PhEval Gene requirements from AMELIE JSON result. Returns: List[PhEvalGeneResult]: List of PhEvalGeneResult. \"\"\" simplified_amelie_result = [] for gene_entry in self . amelie_result : simplified_amelie_result . append ( PhEvalGeneResult ( gene_symbol = self . _find_gene_symbol ( gene_entry ), gene_identifier = self . _find_gene_identifier ( gene_entry ), score = self . _find_highest_score ( gene_entry ), ) ) return simplified_amelie_result","title":"PhEvalGeneResultFromAmelieCreator"},{"location":"api/pheval_amelie/post_process/post_process_results_format/#src.pheval_amelie.post_process.post_process_results_format.PhEvalGeneResultFromAmelieCreator.__init__","text":"Initialise PhEvalGeneResultFromAmelieCreator class. Source code in src/pheval_amelie/post_process/post_process_results_format.py 32 33 34 35 def __init__ ( self , amelie_result : Dict , gene_identifier_updator : GeneIdentifierUpdater ): \"\"\"Initialise PhEvalGeneResultFromAmelieCreator class.\"\"\" self . amelie_result = amelie_result self . gene_identifier_updater = gene_identifier_updator","title":"__init__"},{"location":"api/pheval_amelie/post_process/post_process_results_format/#src.pheval_amelie.post_process.post_process_results_format.PhEvalGeneResultFromAmelieCreator.extract_pheval_gene_requirements","text":"Extract PhEval Gene requirements from AMELIE JSON result. Returns: Type Description List [ PhEvalGeneResult ] List[PhEvalGeneResult]: List of PhEvalGeneResult. Source code in src/pheval_amelie/post_process/post_process_results_format.py 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 def extract_pheval_gene_requirements ( self ) -> List [ PhEvalGeneResult ]: \"\"\" Extract PhEval Gene requirements from AMELIE JSON result. Returns: List[PhEvalGeneResult]: List of PhEvalGeneResult. \"\"\" simplified_amelie_result = [] for gene_entry in self . amelie_result : simplified_amelie_result . append ( PhEvalGeneResult ( gene_symbol = self . _find_gene_symbol ( gene_entry ), gene_identifier = self . _find_gene_identifier ( gene_entry ), score = self . _find_highest_score ( gene_entry ), ) ) return simplified_amelie_result","title":"extract_pheval_gene_requirements"},{"location":"api/pheval_amelie/post_process/post_process_results_format/#src.pheval_amelie.post_process.post_process_results_format.create_standardised_results","text":"Write standardised gene results from default AMELIE JSON output. Parameters: Name Type Description Default results_dir Path Path to the raw results directory. required output_dir Path Path to the output directory. required Source code in src/pheval_amelie/post_process/post_process_results_format.py 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 def create_standardised_results ( results_dir : Path , output_dir : Path ) -> None : \"\"\" Write standardised gene results from default AMELIE JSON output. Args: results_dir (Path): Path to the raw results directory. output_dir (Path): Path to the output directory. \"\"\" hgnc_data = create_hgnc_dict () gene_identifier_updator = GeneIdentifierUpdater ( hgnc_data = hgnc_data , gene_identifier = \"ensembl_id\" ) for result in all_files ( results_dir ): amelie_result = read_amelie_result ( result ) pheval_gene_result = PhEvalGeneResultFromAmelieCreator ( amelie_result , gene_identifier_updator ) . extract_pheval_gene_requirements () generate_pheval_result ( pheval_result = pheval_gene_result , sort_order_str = \"DESCENDING\" , output_dir = output_dir , tool_result_path = result , )","title":"create_standardised_results"},{"location":"api/pheval_amelie/post_process/post_process_results_format/#src.pheval_amelie.post_process.post_process_results_format.read_amelie_result","text":"Parse the AMELIE JSON result. Parameters: Name Type Description Default amelie_result Path Path to the AMELIE JSON result. required Returns: Name Type Description Dict Dict Parsed AMELIE result. Source code in src/pheval_amelie/post_process/post_process_results_format.py 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def read_amelie_result ( amelie_result : Path ) -> Dict : \"\"\" Parse the AMELIE JSON result. Args: amelie_result (Path): Path to the AMELIE JSON result. Returns: Dict: Parsed AMELIE result. \"\"\" with open ( amelie_result , \"r\" ) as file : result = json . load ( file ) file . close () return result","title":"read_amelie_result"},{"location":"api/pheval_amelie/run/prepare_requests/","text":"Prepare requests functions. AmelieParameters dataclass Class to store AMELIE parameters. Source code in src/pheval_amelie/run/prepare_requests.py 13 14 15 16 17 18 19 20 21 @dataclass class AmelieParameters : \"\"\"Class to store AMELIE parameters.\"\"\" phenopacket_path_stem : str phenotypes : List [ str ] patient_name : str patient_sex : str vcf_file : str get_parameters ( phenopacket_dir , testdata_dir ) Get parameters for a corpus. Parameters: Name Type Description Default phenopacket_dir Path Path to Phenopacket directory. required testdata_dir Path Path to testdata directory. required Returns: Type Description List [ AmelieParameters ] List[AmelieParameters]: List of parameters for the corpus Source code in src/pheval_amelie/run/prepare_requests.py 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 def get_parameters ( phenopacket_dir : Path , testdata_dir : Path ) -> List [ AmelieParameters ]: \"\"\" Get parameters for a corpus. Args: phenopacket_dir (Path): Path to Phenopacket directory. testdata_dir (Path): Path to testdata directory. Returns: List[AmelieParameters]: List of parameters for the corpus \"\"\" parameters = [] for phenopacket_path in all_files ( phenopacket_dir ): phenopacket_util = PhenopacketUtil ( phenopacket_reader ( phenopacket_path )) parameters . append ( AmelieParameters ( phenopacket_path_stem = phenopacket_path . stem , phenotypes = _return_hpo_list ( phenopacket_util ), patient_name = _return_patient_name ( phenopacket_util ), patient_sex = _return_patient_sex (( phenopacket_util )), vcf_file = _return_vcf_file ( phenopacket_path , phenopacket_util , testdata_dir ), ) ) return parameters write_parameters ( phenopacket_dir , testdata_dir , tool_input_commands_dir ) Write the parameters to a JSON file. Parameters: Name Type Description Default phenopacket_dir Path Path to Phenopacket directory. required testdata_dir Path Path to testdata directory. required tool_input_commands_dir Path Path to tool input commands dir. required Source code in src/pheval_amelie/run/prepare_requests.py 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 def write_parameters ( phenopacket_dir : Path , testdata_dir : Path , tool_input_commands_dir : Path ) -> None : \"\"\" Write the parameters to a JSON file. Args: phenopacket_dir (Path): Path to Phenopacket directory. testdata_dir (Path): Path to testdata directory. tool_input_commands_dir (Path): Path to tool input commands dir. \"\"\" output_file = tool_input_commands_dir . joinpath ( testdata_dir . name + \"_parameters.json\" ) patients = get_parameters ( phenopacket_dir , testdata_dir ) with open ( output_file , \"w\" ) as file : json . dump ([ asdict ( patient ) for patient in patients ], file , indent = 4 ) file . close ()","title":"Prepare requests"},{"location":"api/pheval_amelie/run/prepare_requests/#src.pheval_amelie.run.prepare_requests.AmelieParameters","text":"Class to store AMELIE parameters. Source code in src/pheval_amelie/run/prepare_requests.py 13 14 15 16 17 18 19 20 21 @dataclass class AmelieParameters : \"\"\"Class to store AMELIE parameters.\"\"\" phenopacket_path_stem : str phenotypes : List [ str ] patient_name : str patient_sex : str vcf_file : str","title":"AmelieParameters"},{"location":"api/pheval_amelie/run/prepare_requests/#src.pheval_amelie.run.prepare_requests.get_parameters","text":"Get parameters for a corpus. Parameters: Name Type Description Default phenopacket_dir Path Path to Phenopacket directory. required testdata_dir Path Path to testdata directory. required Returns: Type Description List [ AmelieParameters ] List[AmelieParameters]: List of parameters for the corpus Source code in src/pheval_amelie/run/prepare_requests.py 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 def get_parameters ( phenopacket_dir : Path , testdata_dir : Path ) -> List [ AmelieParameters ]: \"\"\" Get parameters for a corpus. Args: phenopacket_dir (Path): Path to Phenopacket directory. testdata_dir (Path): Path to testdata directory. Returns: List[AmelieParameters]: List of parameters for the corpus \"\"\" parameters = [] for phenopacket_path in all_files ( phenopacket_dir ): phenopacket_util = PhenopacketUtil ( phenopacket_reader ( phenopacket_path )) parameters . append ( AmelieParameters ( phenopacket_path_stem = phenopacket_path . stem , phenotypes = _return_hpo_list ( phenopacket_util ), patient_name = _return_patient_name ( phenopacket_util ), patient_sex = _return_patient_sex (( phenopacket_util )), vcf_file = _return_vcf_file ( phenopacket_path , phenopacket_util , testdata_dir ), ) ) return parameters","title":"get_parameters"},{"location":"api/pheval_amelie/run/prepare_requests/#src.pheval_amelie.run.prepare_requests.write_parameters","text":"Write the parameters to a JSON file. Parameters: Name Type Description Default phenopacket_dir Path Path to Phenopacket directory. required testdata_dir Path Path to testdata directory. required tool_input_commands_dir Path Path to tool input commands dir. required Source code in src/pheval_amelie/run/prepare_requests.py 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 def write_parameters ( phenopacket_dir : Path , testdata_dir : Path , tool_input_commands_dir : Path ) -> None : \"\"\" Write the parameters to a JSON file. Args: phenopacket_dir (Path): Path to Phenopacket directory. testdata_dir (Path): Path to testdata directory. tool_input_commands_dir (Path): Path to tool input commands dir. \"\"\" output_file = tool_input_commands_dir . joinpath ( testdata_dir . name + \"_parameters.json\" ) patients = get_parameters ( phenopacket_dir , testdata_dir ) with open ( output_file , \"w\" ) as file : json . dump ([ asdict ( patient ) for patient in patients ], file , indent = 4 ) file . close ()","title":"write_parameters"},{"location":"api/pheval_amelie/run/run/","text":"Run functions. post_request ( data , files ) Send a POST request and returns the JSON response. Parameters: Name Type Description Default data dict The data to pass to the request. required files Optional [ dict ] The files to pass to the request. required Returns: Name Type Description dict dict The response. Source code in src/pheval_amelie/run/run.py 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 def post_request ( data : dict , files : dict ) -> dict : \"\"\" Send a POST request and returns the JSON response. Args: data (dict): The data to pass to the request. files (Optional[dict]): The files to pass to the request. Returns: dict: The response. \"\"\" response = requests . post ( AMELIE_URL , verify = False , data = data , files = files , timeout = 600 ) response . raise_for_status () return response . json () read_parameters ( parameters_file ) Read parameters from JSON. Parameters: Name Type Description Default parameters_file Path Path to JSON parameters file. required Returns: Type Description List [ AmelieParameters ] List[AmelieParameters]: List of parameters. Source code in src/pheval_amelie/run/run.py 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 def read_parameters ( parameters_file : Path ) -> List [ AmelieParameters ]: \"\"\" Read parameters from JSON. Args: parameters_file (Path): Path to JSON parameters file. Returns: List[AmelieParameters]: List of parameters. \"\"\" with open ( parameters_file , \"r\" ) as file : data = json . load ( file ) file . close () return [ AmelieParameters ( ** entry ) for entry in data ] run ( testdata_dir , tool_input_commands_dir , raw_results_dir ) Run AMELIE on the corpus. Parameters: Name Type Description Default testdata_dir(Path) Path to the test data directory. required tool_input_commands_dir(Path) Path to the tool input command directory. required raw_results_dir bool Path to raw results directory. required Source code in src/pheval_amelie/run/run.py 93 94 95 96 97 98 99 100 101 102 103 104 105 106 def run ( testdata_dir : Path , tool_input_commands_dir : Path , raw_results_dir : Path ) -> None : \"\"\" Run AMELIE on the corpus. Args: testdata_dir(Path): Path to the test data directory. tool_input_commands_dir(Path): Path to the tool input command directory. raw_results_dir (bool): Path to raw results directory. \"\"\" write_parameters ( testdata_dir . joinpath ( \"phenopackets\" ), testdata_dir , tool_input_commands_dir ) parameters_file = tool_input_commands_dir . joinpath ( testdata_dir . name + \"_parameters.json\" ) parameters = read_parameters ( parameters_file ) run_requests ( parameters , raw_results_dir ) run_requests ( parameters , raw_results_dir ) Run the requests for a corpus. Parameters: Name Type Description Default parameters List [ AmelieParameters ] List of parameters. required raw_results_dir Path Path to the raw results directory. required Source code in src/pheval_amelie/run/run.py 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 def run_requests ( parameters : List [ AmelieParameters ], raw_results_dir : Path ) -> None : \"\"\" Run the requests for a corpus. Args: parameters (List[AmelieParameters]): List of parameters. raw_results_dir (Path): Path to the raw results directory. \"\"\" for parameter in parameters : data = { \"dominantAlfqCutoff\" : 0.1 , \"alfqCutoff\" : 0.5 , \"filterByCount\" : False , \"hmctCutoff\" : 1 , \"alctCutoff\" : 3 , \"patientName\" : parameter . patient_name , \"patientSex\" : parameter . patient_sex , \"onlyPassVariants\" : True , \"filterRelativesOnlyHom\" : False , \"phenotypes\" : \",\" . join ( parameter . phenotypes ), } files = { \"vcfFile\" : open ( parameter . vcf_file , \"rb\" )} try : response_data = post_request ( data , files ) output_filename = raw_results_dir . joinpath ( f \" { parameter . phenopacket_path_stem } .json\" ) save_response_to_file ( response_data , output_filename ) finally : if files : files [ \"vcfFile\" ] . close () save_response_to_file ( response_data , output_path ) Save the JSON response data to a file. Parameters: Name Type Description Default response_data dict The response. required output_path Path Path to write response. required Source code in src/pheval_amelie/run/run.py 30 31 32 33 34 35 36 37 38 39 40 41 def save_response_to_file ( response_data : dict , output_path : Path ) -> None : \"\"\" Save the JSON response data to a file. Args: response_data (dict): The response. output_path (Path): Path to write response. \"\"\" with open ( output_path , \"w\" ) as output_file : json . dump ( response_data , output_file , indent = 4 ) output_file . close ()","title":"Run"},{"location":"api/pheval_amelie/run/run/#src.pheval_amelie.run.run.post_request","text":"Send a POST request and returns the JSON response. Parameters: Name Type Description Default data dict The data to pass to the request. required files Optional [ dict ] The files to pass to the request. required Returns: Name Type Description dict dict The response. Source code in src/pheval_amelie/run/run.py 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 def post_request ( data : dict , files : dict ) -> dict : \"\"\" Send a POST request and returns the JSON response. Args: data (dict): The data to pass to the request. files (Optional[dict]): The files to pass to the request. Returns: dict: The response. \"\"\" response = requests . post ( AMELIE_URL , verify = False , data = data , files = files , timeout = 600 ) response . raise_for_status () return response . json ()","title":"post_request"},{"location":"api/pheval_amelie/run/run/#src.pheval_amelie.run.run.read_parameters","text":"Read parameters from JSON. Parameters: Name Type Description Default parameters_file Path Path to JSON parameters file. required Returns: Type Description List [ AmelieParameters ] List[AmelieParameters]: List of parameters. Source code in src/pheval_amelie/run/run.py 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 def read_parameters ( parameters_file : Path ) -> List [ AmelieParameters ]: \"\"\" Read parameters from JSON. Args: parameters_file (Path): Path to JSON parameters file. Returns: List[AmelieParameters]: List of parameters. \"\"\" with open ( parameters_file , \"r\" ) as file : data = json . load ( file ) file . close () return [ AmelieParameters ( ** entry ) for entry in data ]","title":"read_parameters"},{"location":"api/pheval_amelie/run/run/#src.pheval_amelie.run.run.run","text":"Run AMELIE on the corpus. Parameters: Name Type Description Default testdata_dir(Path) Path to the test data directory. required tool_input_commands_dir(Path) Path to the tool input command directory. required raw_results_dir bool Path to raw results directory. required Source code in src/pheval_amelie/run/run.py 93 94 95 96 97 98 99 100 101 102 103 104 105 106 def run ( testdata_dir : Path , tool_input_commands_dir : Path , raw_results_dir : Path ) -> None : \"\"\" Run AMELIE on the corpus. Args: testdata_dir(Path): Path to the test data directory. tool_input_commands_dir(Path): Path to the tool input command directory. raw_results_dir (bool): Path to raw results directory. \"\"\" write_parameters ( testdata_dir . joinpath ( \"phenopackets\" ), testdata_dir , tool_input_commands_dir ) parameters_file = tool_input_commands_dir . joinpath ( testdata_dir . name + \"_parameters.json\" ) parameters = read_parameters ( parameters_file ) run_requests ( parameters , raw_results_dir )","title":"run"},{"location":"api/pheval_amelie/run/run/#src.pheval_amelie.run.run.run_requests","text":"Run the requests for a corpus. Parameters: Name Type Description Default parameters List [ AmelieParameters ] List of parameters. required raw_results_dir Path Path to the raw results directory. required Source code in src/pheval_amelie/run/run.py 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 def run_requests ( parameters : List [ AmelieParameters ], raw_results_dir : Path ) -> None : \"\"\" Run the requests for a corpus. Args: parameters (List[AmelieParameters]): List of parameters. raw_results_dir (Path): Path to the raw results directory. \"\"\" for parameter in parameters : data = { \"dominantAlfqCutoff\" : 0.1 , \"alfqCutoff\" : 0.5 , \"filterByCount\" : False , \"hmctCutoff\" : 1 , \"alctCutoff\" : 3 , \"patientName\" : parameter . patient_name , \"patientSex\" : parameter . patient_sex , \"onlyPassVariants\" : True , \"filterRelativesOnlyHom\" : False , \"phenotypes\" : \",\" . join ( parameter . phenotypes ), } files = { \"vcfFile\" : open ( parameter . vcf_file , \"rb\" )} try : response_data = post_request ( data , files ) output_filename = raw_results_dir . joinpath ( f \" { parameter . phenopacket_path_stem } .json\" ) save_response_to_file ( response_data , output_filename ) finally : if files : files [ \"vcfFile\" ] . close ()","title":"run_requests"},{"location":"api/pheval_amelie/run/run/#src.pheval_amelie.run.run.save_response_to_file","text":"Save the JSON response data to a file. Parameters: Name Type Description Default response_data dict The response. required output_path Path Path to write response. required Source code in src/pheval_amelie/run/run.py 30 31 32 33 34 35 36 37 38 39 40 41 def save_response_to_file ( response_data : dict , output_path : Path ) -> None : \"\"\" Save the JSON response data to a file. Args: response_data (dict): The response. output_path (Path): Path to write response. \"\"\" with open ( output_path , \"w\" ) as output_file : json . dump ( response_data , output_file , indent = 4 ) output_file . close ()","title":"save_response_to_file"}]}